/*! @preserve
 * bstreeview.js
 * Version: 1.2.0
 * Authors: Sami CHNITER <sami.chniter@gmail.com>
 * Copyright 2020
 * License: Apache License 2.0
 *
 * Project: https://github.com/chniter/bstreeview
 */
!function(c,t,e,i){"use strict";var n="bstreeview",s={expandIcon:"fa fa-angle-down fa-fw",collapseIcon:"fa fa-angle-right fa-fw",indent:1.25,parentsMarginLeft:"1.25rem",openNodeLinkOnNewTab:!0},h='<div role="treeitem" class="list-group-item" data-toggle="collapse"></div>',p='<div role="group" class="list-group collapse" id="itemid"></div>',f='<i class="state-icon"></i>',u='<i class="item-icon"></i>';function a(t,e){this.element=t,this.itemIdPrefix=t.id+"-item-",this.settings=c.extend({},s,e),this.init()}c.extend(a.prototype,{init:function(){this.tree=[],this.nodes=[],this.settings.data&&(this.settings.data.isPrototypeOf(String)&&(this.settings.data=c.parseJSON(this.settings.data)),this.tree=c.extend(!0,[],this.settings.data),delete this.settings.data),c(this.element).addClass("bstreeview"),this.initData({nodes:this.tree});var e=this;this.build(c(this.element),this.tree,0),c(this.element).on("click",".list-group-item",function(t){"A"!==t.target.tagName?c(".state-icon",this).toggleClass(e.settings.expandIcon).toggleClass(e.settings.collapseIcon):t.stopPropagation()})},initData:function(t){if(t.nodes){var i=t,n=this;c.each(t.nodes,function(t,e){e.nodeId=n.nodes.length,e.parentId=i.nodeId,n.nodes.push(e),e.nodes&&n.initData(e)})}},build:function(o,t,r){var l=this,g=l.settings.parentsMarginLeft;0<r&&(g=(l.settings.indent+r*l.settings.indent).toString()+"rem;"),r+=1,c.each(t,function(t,e){var i=c(h).attr("data-target","#"+l.itemIdPrefix+e.nodeId).attr("style","padding-left:"+g).attr("aria-level",r);if(e.nodes){var n=c(f).addClass(l.settings.collapseIcon);i.append(n)}if(e.icon){var s=c(u).addClass(e.icon);i.append(s)}var a=e.text;if(e.href&&((a=c("<a>"+a+"</a>")).attr("href",e.href),l.settings.openNodeLinkOnNewTab&&a.attr("target","_blank")),i.append(a),e.class&&i.addClass(e.class),e.id&&i.attr("id",e.id),o.append(i),e.nodes){var d=c(p).attr("id",l.itemIdPrefix+e.nodeId);o.append(d),l.build(d,e.nodes,r)}})}}),c.fn[n]=function(t){return this.each(function(){c.data(this,"plugin_"+n)||c.data(this,"plugin_"+n,new a(this,t))})}}(jQuery,window,document);